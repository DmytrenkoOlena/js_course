{"version":3,"sources":["location_api.js","dom.js","index.js"],"names":["LocationApi","fetch","then","res","status","json","Promise","reject","myIp","Dom","lat","document","getElementById","long","city","country","ip","id","style","opacity","crd","value","latitude","longitude","country_name","innerHTML","locationApi","dom","btn","addEventListener","showPreloader","setTimeout","getMyIp","getMyLocation","setCoordinates","hidePreloader","catch","console","log","rej"],"mappings":"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","file":"lesson_21.e7e643d9.map","sourceRoot":"..","sourcesContent":["export default class LocationApi {\n    getMyIp() {\n        return fetch('https://api.ipify.org?format=json')\n            .then(res => {\n                if(res.status === 200) {\n                    return res.json();\n                } else {\n                    return Promise.reject(res.status);\n                }\n            })\n    };\n    \n    getMyLocation(myIp) {\n        return fetch(`https://freegeoip.net/json/${myIp}`)\n            .then (res => {\n                if (res.status === 200) {\n                    return res.json();\n                } else {\n                    return Promise.reject(res.status);\n                }\n            })\n    }\n};","export default class Dom {\n    constructor() {\n        this.lat = document.getElementById('lat');\n        this.long = document.getElementById('long');\n        this.city = document.getElementById('city');\n        this.country = document.getElementById('country');\n        this.ip = document.getElementById('ip');\n        this.id = document.getElementById('gif');\n    }\n\n    showPreloader() {\n        this.id.style.opacity = 0;\n    };\n\n    hidePreloader() {\n        this.id.style.opacity = 1;\n    };\n\n    setCoordinates(crd) {\n        this.lat.value = crd.latitude;\n        this.long.value = crd.longitude;\n        this.city.value = crd.city;\n        this.country.value = crd.country_name;\n        this.ip.innerHTML = `ip: ${crd.ip}`;\n    };\n}","import LocationApi from './location_api';\nimport Dom from './dom';\n\nconst locationApi = new LocationApi();\nconst dom = new Dom();\nconst btn = document.getElementById('btn');\n\nbtn.addEventListener('click', () => {\n    dom.showPreloader();\n    setTimeout(() => {\n        locationApi.getMyIp()\n                .then(res => locationApi.getMyLocation(res.ip))\n                .then(res => dom.setCoordinates(res))\n                .then(res => dom.hidePreloader())\n                .catch(rej => {\n                    dom.hidePreloader();\n                    console.log('Error:', rej);\n                });\n    }, 2000);\n})"]}