{"version":3,"sources":["location_api.js","dom.js","weather.js","index.js"],"names":["LocationApi","fetch","then","res","status","json","Promise","reject","myIp","Dom","lat","document","getElementById","long","city","country","ip","id","style","opacity","crd","value","latitude","longitude","country_name","WeatherApi","my_api_key","weather","resolve","Error","data","innerHTML","main","temp","toFixed","locationApi","dom","btn","btn2","Weather","addEventListener","showPreloader","getMyIp","getMyLocation","setCoordinates","getOpenWeather","setOpenWeather","hidePreloader","catch","console","log","rej"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AGAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMmC,cAAc,IAAInC,sBAAJ,EAApB;AACA,IAAMoC,MAAM,IAAI3B,aAAJ,EAAZ;AACA,IAAM4B,MAAM1B,SAASC,cAAT,CAAwB,KAAxB,CAAZ;AACA,IAAM0B,OAAO3B,SAASC,cAAT,CAAwB,MAAxB,CAAb;AACA,IAAMe,UAAU,IAAIY,iBAAJ,EAAhB;;AAEAF,IAAIG,gBAAJ,CAAqB,OAArB,EAA8B,YAAM;AAChCJ,QAAIK,aAAJ;AACIN,gBAAYO,OAAZ,GACSxC,IADT,CACc;AAAA,eAAOiC,YAAYQ,aAAZ,CAA0BxC,IAAIa,EAA9B,CAAP;AAAA,KADd,EAESd,IAFT,CAEc,eAAO;AACTkC,YAAIQ,cAAJ,CAAmBzC,GAAnB;AACA,eAAOwB,QAAQkB,cAAR,CAAuB1C,IAAIW,IAA3B,CAAP;AACH,KALT,EAMSZ,IANT,CAMc,eAAO;AACTyB,gBAAQmB,cAAR,CAAuB3C,GAAvB;AACAiC,YAAIW,aAAJ;AACH,KATT,EAUSC,KAVT,CAUe,eAAO;AACVZ,YAAIW,aAAJ;AACAE,gBAAQC,GAAR,CAAY,QAAZ,EAAsBC,GAAtB;AACH,KAbT;AAcP,CAhBD;AAiBAb,KAAKE,gBAAL,CAAsB,OAAtB,EAA+B,YAAM;AACjC,QAAM1B,OAAOH,SAASC,cAAT,CAAwB,MAAxB,CAAb;AACA,QAAGE,KAAKO,KAAR,EAAe;AACXe,YAAIK,aAAJ;AACAd,gBAAQkB,cAAR,CAAuB/B,KAAKO,KAA5B,EACSnB,IADT,CACc,eAAO;AACTyB,oBAAQmB,cAAR,CAAuB3C,GAAvB;AACAiC,gBAAIW,aAAJ;AACH,SAJT,EAKSC,KALT,CAKe,eAAO;AACVZ,gBAAIW,aAAJ;AACAE,oBAAQC,GAAR,CAAY,QAAZ,EAAsBC,GAAtB;AACH,SART;AASH;AACJ,CAdD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AD3BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;IAGqB1B;AACpB,uBAAe;AAAA;;AACd,OAAKC,UAAL,GAAkB,kCAAlB;AACA,OAAKC,OAAL,GAAehB,SAASC,cAAT,CAAwB,SAAxB,CAAf;AACA;;;;iCAEcE,MAAM;AAClB;AACF,UAAOb,6DAA2Da,IAA3D,eAAyE,KAAKY,UAA9E,EACLxB,IADK,CACA,mBAAW;AAChB,QAAG0B,QAAQxB,MAAR,KAAmB,GAAtB,EAA2B;AAC1B,YAAOwB,QAAQvB,IAAR,EAAP;AACA,KAFD,MAEO;AACN,WAAM,IAAIwB,KAAJ,CAAU,OAAV,CAAN;AACA;AACD,IAPK,CAAP;AAQA;;;iCAEcC,MAAM;AACpB,QAAKH,OAAL,CAAaI,SAAb,GAAyB,CAACD,KAAKE,IAAL,CAAUC,IAAV,GAAe,MAAhB,EAAwBC,OAAxB,CAAgC,CAAhC,IAAqC,SAA9D;;AAEC;AAED;;;;;;kBAvBmBT;;;;;;;;;;;;;;;;IDnBAhB;AACjB,mBAAc;AAAA;;AACV,aAAKC,GAAL,GAAWC,SAASC,cAAT,CAAwB,KAAxB,CAAX;AACA,aAAKC,IAAL,GAAYF,SAASC,cAAT,CAAwB,MAAxB,CAAZ;AACA,aAAKE,IAAL,GAAYH,SAASC,cAAT,CAAwB,MAAxB,CAAZ;AACA,aAAKG,OAAL,GAAeJ,SAASC,cAAT,CAAwB,SAAxB,CAAf;AACA,aAAKI,EAAL,GAAUL,SAASC,cAAT,CAAwB,IAAxB,CAAV;AACA,aAAKK,EAAL,GAAUN,SAASC,cAAT,CAAwB,KAAxB,CAAV;AACH;;;;wCAEe;AACZ,iBAAKK,EAAL,CAAQC,KAAR,CAAcC,OAAd,GAAwB,CAAxB;AACH;;;wCAEe;AACZ,iBAAKF,EAAL,CAAQC,KAAR,CAAcC,OAAd,GAAwB,CAAxB;AACH;;;uCAEcC,KAAK;AAChB,iBAAKV,GAAL,CAASW,KAAT,GAAiBD,IAAIE,QAArB;AACA,iBAAKT,IAAL,CAAUQ,KAAV,GAAkBD,IAAIG,SAAtB;AACA,iBAAKT,IAAL,CAAUO,KAAV,GAAkBD,IAAIN,IAAtB;AACA,iBAAKC,OAAL,CAAaM,KAAb,GAAqBD,IAAII,YAAzB;AACH;;;;;;kBAvBgBf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IDAAT;;;;;;;kCACP;AACN,mBAAOC,MAAM,mCAAN,EACFC,IADE,CACG,eAAO;AACT,oBAAGC,IAAIC,MAAJ,KAAe,GAAlB,EAAuB;AACnB,2BAAOD,IAAIE,IAAJ,EAAP;AACH,iBAFD,MAEO;AACH,2BAAOC,QAAQC,MAAR,CAAeJ,IAAIC,MAAnB,CAAP;AACH;AACJ,aAPE,CAAP;AAQH;;;sCAEaI,MAAM;AAChB,mBAAOP,sCAAoCO,IAApC,EACFN,IADE,CACI,eAAO;AACV,oBAAIC,IAAIC,MAAJ,KAAe,GAAnB,EAAwB;AACpB,2BAAOD,IAAIE,IAAJ,EAAP;AACH,iBAFD,MAEO;AACH,2BAAOC,QAAQC,MAAR,CAAeJ,IAAIC,MAAnB,CAAP;AACH;AACJ,aAPE,CAAP;AAQH;;;;;;kBArBgBJ;AAsBpB","file":"lesson_22.edc04d05.map","sourceRoot":"..","sourcesContent":["export default class LocationApi {\n    getMyIp() {\n        return fetch('https://api.ipify.org?format=json')\n            .then(res => {\n                if(res.status === 200) {\n                    return res.json();\n                } else {\n                    return Promise.reject(res.status);\n                }\n            })\n    };\n    \n    getMyLocation(myIp) {\n        return fetch(`https://freegeoip.net/json/${myIp}`)\n            .then (res => {\n                if (res.status === 200) {\n                    return res.json();\n                } else {\n                    return Promise.reject(res.status);\n                }\n            })\n    }\n};","export default class Dom {\n    constructor() {\n        this.lat = document.getElementById('lat');\n        this.long = document.getElementById('long');\n        this.city = document.getElementById('city');\n        this.country = document.getElementById('country');\n        this.ip = document.getElementById('ip');\n        this.id = document.getElementById('gif');\n    }\n\n    showPreloader() {\n        this.id.style.opacity = 0;\n    };\n\n    hidePreloader() {\n        this.id.style.opacity = 1;\n    };\n\n    setCoordinates(crd) {\n        this.lat.value = crd.latitude;\n        this.long.value = crd.longitude;\n        this.city.value = crd.city;\n        this.country.value = crd.country_name;\n    };\n}","// this.temp = document.getElementById(\"temp\");\n// this.cache = {};\n\n// getOpenWeather(city) {\n// \tif (this.cache[city] && Date.now() -this.cache[city].timestamp < 1000 * 60 * 10) {\n// \t\treturn this.cache[city].data;\n// \t}\n// \treturn fetch(\"http...\");\n// \t.then(resolve => {\n// \t\tif(resolve.status === 200) {\n// \t\t\treturn resolve.json();\n// \t\t} else {\n// \t\t\tthrow new Error(\"error\");\n// \t\t}\n// \t})\n// \t.then((data) =>)\n// }\n\n\nexport default class WeatherApi {\n\tconstructor () {\n\t\tthis.my_api_key = '53232a7bbc8a0e876ac4ef3c76905926';\n\t\tthis.weather = document.getElementById(\"weather\");\n\t}\n\t\n\tgetOpenWeather(city) {\n\t   // console.log(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${this.my_api_key}`);\n\t\treturn fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${this.my_api_key}`)\n\t\t\t.then(resolve => {\n\t\t\t\tif(resolve.status === 200) {\n\t\t\t\t\treturn resolve.json();\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('error');\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tsetOpenWeather(data) {\n\t\tthis.weather.innerHTML = (data.main.temp-273.15).toFixed(0) + '&#8451;';\n\t\n\t\t\t//console.log(this.tempC);\n\t\t\n\t}\n}\n","import LocationApi from './location_api';\nimport Dom from './dom';\nimport Weather from './weather';\n\nconst locationApi = new LocationApi();\nconst dom = new Dom();\nconst btn = document.getElementById('btn');\nconst btn2 = document.getElementById('btn2');\nconst weather = new Weather();\n\nbtn.addEventListener('click', () => {\n    dom.showPreloader();\n        locationApi.getMyIp()\n                .then(res => locationApi.getMyLocation(res.ip))\n                .then(res => {\n                    dom.setCoordinates(res);\n                    return weather.getOpenWeather(res.city);\n                })\n                .then(res => {\n                    weather.setOpenWeather(res);\n                    dom.hidePreloader();\n                })\n                .catch(rej => {\n                    dom.hidePreloader();\n                    console.log('Error:', rej);\n                });\n})\nbtn2.addEventListener('click', () => {\n    const city = document.getElementById('city');\n    if(city.value) {\n        dom.showPreloader();\n        weather.getOpenWeather(city.value)\n                .then(res => {\n                    weather.setOpenWeather(res);\n                    dom.hidePreloader();\n                })\n                .catch(rej => {\n                    dom.hidePreloader();\n                    console.log('Error:', rej);\n                });\n    }\n}) "]}